<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Studio Rack // WAV-MIDI</title>
    <link rel="stylesheet" href="/static/css/rack.css">
</head>
<body>

<div class="studio-container">
    
    <!-- HEADER -->
    <div class="rack-header">
        <h1>NEURAL<span class="highlight">AUDIO</span> LAB</h1>
        <div class="status-led" id="system-status"></div>
    </div>

    <!-- RACK UNIT 1: TAPE DECK (INPUT) -->
    <div class="rack-unit" id="unit-tape">
        <div class="rack-ears"></div>
        <div class="unit-face">
            <h3>INPUT SOURCE</h3>
            <div class="deck-controls">
                <input type="file" id="audio-input" accept=".wav" hidden>
                <button class="metal-btn" onclick="document.getElementById('audio-input').click()">LOAD TAPE</button>
                <div class="screen" id="filename-display">NO TAPE LOADED</div>
            </div>
            <canvas id="input-viz" width="300" height="60"></canvas>
        </div>
        <div class="rack-ears"></div>
    </div>

    <!-- RACK UNIT 2: ANALYZER (TRACK A) -->
    <div class="rack-unit" id="unit-analyzer">
        <div class="rack-ears"></div>
        <div class="unit-face">
            <h3>TRACK A: TRANSCRIBER</h3>
            <div class="knob-group">
                <div class="knob-container">
                    <input type="range" min="0.1" max="0.9" step="0.1" value="0.5" id="threshold-knob">
                    <label>SENSITIVITY</label>
                    <span class="val-disp" id="thresh-val">0.5</span>
                </div>
                <div class="knob-container">
                    <input type="number" value="42" id="seed-input" class="lcd-input">
                    <label>SEED</label>
                </div>
            </div>
            <div class="vu-meter">
                <div class="led-row">
                    <div class="led green"></div><div class="led green"></div><div class="led yellow"></div><div class="led red"></div>
                </div>
                <label>CONFIDENCE</label>
            </div>
        </div>
        <div class="rack-ears"></div>
    </div>

    <!-- RACK UNIT 3: SYNTHESIZER (TRACK B) -->
    <div class="rack-unit" id="unit-synth">
        <div class="rack-ears"></div>
        <div class="unit-face">
            <h3>TRACK B: SYNTHESIS</h3>
            <div class="switch-group">
                <label class="toggle-switch">
                    <input type="checkbox" id="humanize-switch" checked>
                    <span class="slider"></span>
                </label>
                <span class="switch-label">HUMANIZE TIMING</span>
            </div>
            <button class="big-red-btn" id="run-btn" onclick="runPipeline()">PROCESS</button>
        </div>
        <div class="rack-ears"></div>
    </div>

    <!-- RACK UNIT 4: MONITOR (OUTPUT) -->
    <div class="rack-unit" id="unit-monitor">
        <div class="rack-ears"></div>
        <div class="unit-face">
            <h3>MASTER MONITOR</h3>
            <div class="screen large" id="log-screen">SYSTEM READY...</div>
            <div class="metrics-panel" id="metrics-panel">
                <div class="metric"><span>MSE:</span> <span id="m-mse">--</span></div>
                <div class="metric"><span>NOTES:</span> <span id="m-notes">--</span></div>
            </div>
            <audio id="audio-player" controls style="width: 100%; margin-top: 10px; filter: invert(1);"></audio>
        </div>
        <div class="rack-ears"></div>
    </div>

</div>

<script src="/static/js/deck.js"></script>
</body>
</html>